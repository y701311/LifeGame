# JavaScriptの基本文法

このページでは、ライフゲームを作るためにJavaScriptの基本文法を解説します。
<https://developer.mozilla.org/ja/docs/Web/JavaScript/Guide>より必要と思われる箇所を抜粋して紹介するので、より詳しく知りたい場合はこちらを参照すると良いでしょう。

## 目次

- 実行方法
- 文法
  - はじめに
  - 基本
  - 演算子と型
  - 変数
  - 制御構文
  - 配列
  - 関数
  - オブジェクト指向
- 練習問題

## 実行方法

1. ブラウザ上のオンラインエディタ<https://paiza.io/ja>へアクセスし、「コード作成を試してみる」をクリックする

2. 左上の言語選択欄からJavaScriptを選択する

3. コードを書く

4. 実行ボタンを押すと実行される

## 文法

### はじめに

コンピュータ(計算機)は様々な処理を行えます。

コンピュータに命令をするためにはコンピュータが理解できる言葉(=プログラム)を書かなくてはなりません。

ここでは、プログラミング言語の1つであるJavaScriptについて学んでいきましょう。

### 基本

はじめの一歩として、世界に挨拶をしてみましょう！

コード欄に下のコードを書いてみましょう。

```js
console.log("Hello, world!");
```

Hello, world!と出力されたら成功です。

このように、

```js
console.log("xxx");
```

というコードは、「xxxという文字列を出力せよ」といった命令です。

今回は、このようにして何かを出力させていきます。

さて次は、計算をさせてみましょう。

```js
console.log(2 + 4); // 足し算
console.log(2 - 4); // 引き算
console.log(2 * 4); // 掛け算
console.log(2 / 4); // 割り算
```

しっかり計算結果が表示されましたか？

コード中の//の後ろは「コメント」といい、コンピュータへの命令とは解釈されないものです。

コメントは下のように書きます。

```js
console.log("実行される"); // //の後ろはコメント
// console.log("実行されない");
/* これもコメント */
/*
複数行の
コメント
*/
```

ここまで、行の後ろに;(セミコロン)が付いていますね。

JavaScriptでは、命令は文と呼ばれ、;によって区切られています。

1行に1文を書くなら、自動的に;が挿入されて解釈されます。しかし、これは誤作動の原因となることがあるので、文の終わりには;をつけるようにしましょう。

また、計算を行った例のように、JavaScriptでは上から順に実行されていきます。

### 演算子と型

JavaScriptの演算子の一部を以下に紹介します。

```js
// 算術演算子
console.log(1 + 2); // 加算
console.log(1 - 2); // 減算
console.log(1 * 2); // 乗算
console.log(1 / 2); // 除算
console.log(1 % 2); // 剰余
console.log(-(-3)); // 単項符号反転
console.log(2 ** 3);// 指数演算子 この場合、2の3乗
// 比較演算子
console.log(2 == 2); // 等価演算子
console.log(2 != 2); // 不等価演算子
console.log(3 > 2);  // より大きい
console.log(2 >= 2); // 以上
console.log(3 < 2);  // より小さい
console.log(2 <= 2); // 以下
```

JavaScriptのデータ型は以下の8つです。

| 型名 | 説明 |
|--|--|
| Boolean | (真偽値) true または falseを表す |
| Number | (数値) 整数や浮動小数点数を表す |
| BigInt | (長整数) 精度が自由な整数値を表す |
| String | (文字列) 文字列を表す |
| Symbol | (シンボル) 固有の識別子を表す |
| Object | (オブジェクト) データおよびデータをやり取りするデータ構造 |
| null | null値を表す |
| undefined | (未定義) 値が未定義であることを表す |

### 変数

以下のコードは、ある数とある数の四則演算を出力するものです。

```js
console.log(2 + 4); // 足し算
console.log(2 - 4); // 引き算
console.log(2 * 4); // 掛け算
console.log(2 / 4); // 割り算
```

このコードを2と4の計算ではなく3と5の計算に変更するとしたら、8箇所も変更しなければなりません。

そこで変数の登場です。変数は以下のように宣言します。

```js
let x; // 変数の宣言
```

変数には、=(代入演算子)を用いて代入を行えます。

```js
x = 3; // 変数への代入
```

変数の宣言と代入を一緒に行うこともできます。

```js
let x = 3; // 変数の代入を伴う宣言
```

複数の変数を宣言できます。

```js
let x, y; // 同時に宣言
let x = 3, y = 5; // 同時に代入を伴う宣言
let x = 3; // もちろん別々にも宣言できる
let y = 5;
```

さて、変数を使って四則演算のコードを書き換えてみましょう。

```js
let x = 3;
let y = 5;
console.log(x + y); // 足し算
console.log(x - y); // 引き算
console.log(x * y); // 掛け算
console.log(x / y); // 割り算
```

これで変更しやすくなりましたね！

変数には、数値以外も代入できます。

```js
let greeting = "Hello";
console.log(greeting);
```

変数の宣言に用いるletというのは、英単語のletらしいです。

Let x be 3.(xを3とする)と考えると覚えやすいかもしれないですね。

変数の名前を変数名といいますが、変数名として付けられる名前には制限があります。

- 文字、アンダースコア (_)、あるいはドル記号 ($) から始まらなくてはならない

- 予約語は使用できない

変数名として使用できる例：a123, apple, Apple

変数名として利用できない例：123a, let

変数の宣言には、let以外を使った方法もあります。

```js
let x = 3; // 再宣言が禁止
var y = 4; // 再宣言、再代入が可能
const z = 5; // 再宣言、再代入が禁止
```

### 制御構文

#### 条件分岐

特定の条件を満たす場合に処理を行いたいとき、if文を使います。

```js
let x = 3;
if (x == 3) {
    console.log("xは3です！");
}
```

if文の構造を見ていきましょう。

「if」の後ろには()があり、その中にはBoolean型を生成する式または文を記述します。()内で生成されたのがtrue(真)なら、()の後ろの1文を実行します。この場合は、{}内の処理を行います。

{}はブロック文といい、文のまとまりを表します。まとまりなので、複数の文を書くことが出来ます。

```js
let x = 3;
if (x > 2) {
    console.log("xは2より大きいよ！");
    console.log("xの値は" + x + "だよ！"); // 文字列と数値の連結 + を使う
}
```

前のif文がfalse(偽)を生成したときに実行されるのがelse文です。

```js
let x = 3;
if (x < 2) {
    console.log("xは2より小さいよ！");
} else {
    console.log("xは2以上だよ！");
}
```

if文やelse文は入れ子(ネスト)にすることが出来ます。

```js
let x = 3, y = 4;
if (x > 2) {
    if (y > 3){
        console.log("xは2より大きく、yは3より大きいです！");
    } else {
        console.log("xは2より大きく、yは3以下です！");
    }
} else {
    if (y > 3){
        console.log("xは2以下で、yは3より大きいです！");
    } else {
        console.log("xは2以下で、yは3以下です！");
    }
}
```

論理演算子を使い、複数の条件を指定できます。

```js
let x = 3, y = 4;
if (x == 3 && y == 4) { // && and演算子
    console.log("xは3でyは4です！");
}
if (x == 3 || y == 4) { // || or演算子
    console.log("xは3かyは4です！");
}
if (!(x == 2)) { // ! not演算子
    console.log("xは2じゃないです！");
}
```

#### 繰返し

繰返し処理を行いたいときは、for文を使います。

```js
for (let i = 1; i <= 5; i++) { // ++ は前置増分演算子 iを評価した後iに1加える
    console.log(i + "回目だよ！");
}
```

for文の構造を見ていきましょう。

```js
for ([初期化式]; [条件式]; [加算式])
    文
```

というfor文があったとします。これは、

1. もしあれば、初期化式が実行されます。初期化式で変数を宣言することもできます。

2. 条件式が評価されます。条件式の値が true の場合、ループ文が実行されます。条件式の値が false の場合、for ループは終了します。条件式がすべて省略されている場合、条件式は真であると仮定されます。

3. 文が実行されます。複数の文を実行するには、それらの文をグループ化するためにブロック文 ({ ... }) を使用します。

4. もしあれば、加算式が実行されます。

5. ステップ 2 に制御が戻ります。

という処理を行います。

繰返し処理にはwhile文もあります。

```js
let x = 0;
while (x < 3) {
    console.log(x + "は3より小さいよ！");
    x++;
}
```

while文の構文を見ていきましょう。

```js
while (条件式)
    文
```

というwhile文があったとします。

条件式が false となる場合、ループ内の文は実行を停止し、ループに続く文に制御が渡されます。

ループ内の文が実行される前に条件式が評価されます。条件式の値が true の場合、文は実行され、条件式が再び評価されます。条件式の値が false の場合、実行は停止し、while の次の文に制御が渡されます。

複数の文を実行するには、それらの文をグループ化するブロック文 ({ ... }) を使用します。

for文やwhile文なども入れ子にすることができます。

```js
let x = 1;
for (let i = 0; i < 3; i++) {
    for (let j = 0; j < 4; j++) {
        console.log(x + "回目だよ！");
        x++;
    }
}
```

ループを強制終了するbreak文などもあります。

### 配列

#### 一次元配列

大人数の身長の平均を求めるときなどに、配列を使うと便利です。

```js
let height = [160, 170, 180, 190, 200];
let sum = 0;
let avg = 0;
for (let i = 0; i < height.length; i++) {
    sum += height[i];
    // += 加算代入演算子 sumにheight[i]を足した値をsumに代入
    // sum = sum + height[i]; と同じ
}
avg = sum / height.length;
console.log("平均身長は" + avg + "cmです！");
```

配列の宣言は以下のように行います。

```js
// 配列の宣言
let arr = new Array(element0, element1, ..., elementN)
let arr = Array(element0, element1, ..., elementN)
let arr = [element0, element1, ..., elementN]
```

配列のインデックス(添字)は0から始まるので、1番目の要素はarr[0]、2番目の要素はarr[1]のようにしてアクセスできます。

さて、身長の平均を求めるときに出てきたheight.lengthとは何なのでしょう？

JavaScriptでは、配列はArrayオブジェクトであり、オブジェクトはメソッドやプロパティを持っています。Arrayオブジェクトは自身の配列の長さをプロパティとして持っており、プロパティへのアクセス方法として 配列名.プロパティ名 と書く方法があります。詳しくは、この後のオブジェクト指向の章で解説します。

#### 多次元配列

配列を要素として持つ配列を作ることが出来ます。

```js
let score = Array(4);
for (let i = 0; i < 4; i++) {
    score[i] = Array(5); // score配列の要素を配列にする
    for (let j = 0; j < 5; j++) {
        score[i][j] = i * 10 + j;
        console.log("score[" + i + "][" + j + "] = " + score[i][j]);
    }
}
```

### 関数

関数とは外部 (再帰の場合は内部) から呼び出すことのできる「サブプログラム」です。プログラムそのもののように、関数は関数本体 (function body) と呼ばれる連続した文で構成されます。値を関数に渡すことができ、関数は値を返すことができます。

関数定義(関数宣言や関数定義文とも)はfunction キーワードと、それに続く以下の内容で構成されます。

- 関数の名前。
- 関数への引数のリスト。丸括弧でくくり、カンマで区切ります。
- 関数を定義する JavaScript の文。波括弧 {...} でくくります。

以下のコードは、受け取った引数の二乗を返す関数の定義です。return文は関数の返す値を指定します。

```js
function square(number) {
    return number * number;
}
```

定義した関数squareを呼び出してみましょう。

```js
console.log(square(9));
```

関数を呼ぶ出す際には、関数名(引数1, 引数2, ...) とします。

JavaScriptの関数は、数学の関数と違って様々なことが出来ます。

```js
function greeting() {// 引数は省略可
    console.log("Hello!"); // 値を返す以外のこともできる
    // 値を返さなくてもいい
}
greeting();
```

### オブジェクト指向

#### オブジェクト

オブジェクトは、現実世界の「もの」 (すなわちオブジェクト) になぞらえることができます。JavaScript におけるオブジェクトの概念は、現実世界に実在する「もの」との対比で解釈できます。

JavaScript において、オブジェクトはプロパティと型を持つ独立した存在です。カップを例に考えてみましょう。カップは様々なプロパティ (特性) をもったもの (オブジェクト) です。カップは、色や形状、重さや材質といったプロパティを持っています。同様に、JavaScript のオブジェクトもプロパティを持つことができ、プロパティによってそのオブジェクトの特徴を定義することができます。

JavaScript のオブジェクトは、自身に関連付けられたプロパティを持ちます。オブジェクトのプロパティは、オブジェクトに関連付けられている変数と捉えることができます。オブジェクトのプロパティは、オブジェクトに属するものという点を除けば、基本的に通常の JavaScript 変数と同じようなものです。オブジェクトのプロパティは、オブジェクトの特性を定義します。オブジェクトのプロパティには、単純なドット表記でアクセスします。

```js
objectName.propertyName
```

JavaやC++といったクラスベースのオブジェクト指向言語とは違い、JavaScriptは、クラスではなくプロトタイプに基づいたオブジェクトベースの言語です。

JavaScriptはクラスではなくプロトタイプを用いてオブジェクト指向を実現しています。

#### クラス

クラスはオブジェクトを作成するためのテンプレートです。

クラスを宣言してみましょう。クラスを宣言するには、クラス名 (この例では "Rectangle") 付きで class キーワードを使います。

```js
class Rectangle {
    // constructorはclassで作ったオブジェクトを作成して、初期化するための特別なメソッド
    constructor(height, width) {
        // Rectangleオブジェクトにheightとwidthというプロパティを追加
        // 自身のプロパティにはthisを使ってアクセスできる
        this.height = height;
        this.width = width;
    }

    // 長方形の面積を計算するメソッド
    // オブジェクトが持つプロパティにアクセスできる
    calcArea() {
        return this.height * this.width;
    }
}
```

オブジェクトのプロパティとして関数を設定でき、これをメソッド呼ぶことが多いです。

クラスを利用してみましょう。

```js
let smallRect = new Rectangle(3, 5);
let largeRect = new Rectangle(30, 50);
console.log("smallRectの面積：" + smallRect.calcArea());
console.log("largeRectの面積：" + largeRect.calcArea());
```

## 練習問題

1. 変数a, b, cを定義し、それぞれに数値を代入して、その積を出力せよ。

2. 変数xを定義し数値を代入して、xが100以上ならxの値を出力し、そうでないならxを10倍した数を出力せよ。

3. 5人分の点数が格納された配列を定義し、その平均点を出力せよ。また、点数が60点以上の人数を出力せよ。

4. プロパティとしてfuel(燃料)、maker(製造会社)、run(走行を表すメソッド)を持つ、車を表すCarクラスを定義し、Carクラスの変数を定義、runメソッドを実行せよ。
